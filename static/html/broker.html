<!DOCTYPE html>
<html lang="en">
  <head>
    <link href='/css/bootstrap.min.css' rel='stylesheet' type="text/css" />
  </head>
  <body>
    <div class="container">
      <div class="row">
        <div class="col-md-10">
          <h1>
            Broker
            <small id="broker-id"> </small>
          </h1>
        </div>
        <div class="col-md-2">
          <h3>
            <a class="btn btn-default" href="/"> overview </a>
          </h3>
        </div>
      </div>
      <h3>Summary</h3>
      <table class="table">
        <thead>
          <tr>
            <th></th>
            <th></th>
          </tr>
        </thead>
        <tbody id="broker-summary"> </tbody>
      </table>

      <script id='tmpl-summary' type='text/x-handlebars-template'>
        <tr>
          <td> <strong> Kafka version </strong> </td>
          <td> {{kafka_version}} </td>
        </tr>
        <tr>
          <td> <strong> Messages in/s </strong> </td>
          <td> {{messages_in_per_sec}} </td>
        </tr>
        <tr>
          <td> <strong> Bytes in/s </strong> </td>
          <td> {{bytes_in_per_sec}} </td>
        </tr>
        <tr>
          <td> <strong> Bytes out/s </strong> </td>
          <td> {{bytes_out_per_sec}} </td>
        </tr>
      </script>

      <script src='/js/jquery-3.1.1.min.js' type="text/javascript" ></script>
      <script src='/js/handlebars.min.js' type="text/javascript" ></script>
      <script type="text/javascript">
        var brokerId = document.location.pathname.replace("/brokers/", "");
        document.title = "Broker: "+ brokerId;
        $('#broker-id').text(brokerId);
        var renderSummary = function() {
          var $summary = $('#broker-summary');
          var summaryTmpl = Handlebars.compile($('#tmpl-summary').html());
          $.get("/api/brokers/" + brokerId, function(broker) {
            $summary.html(summaryTmpl(broker));
          })
        }
        renderSummary();
      </script>
    </div>
  </body>
</html>
